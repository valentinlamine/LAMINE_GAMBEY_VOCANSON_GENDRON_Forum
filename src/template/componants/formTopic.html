{{define "formTopic"}}
<link rel="stylesheet" href="../CSS/formTopic.css">
<div class="formTopic">
    <form onsubmit="return false" class="create-topic">
        <h1>Create a topic</h1> 
        <h2>Topic Title (upp to 255 characters)</h2>
        <textarea name="name" placeholder="name"></textarea>
        <textarea name="description" placeholder="description"></textarea>
        <input type="radio" id="public" name="private" value="false" checked>
        <label for="public">Public</label>
        <input type="radio" id="private" name="private" value="true">
        <label for="private">Private</label>
        <input type="number" name="userid" placeholder="userid">
        <p id="create-topic-info"></p>
        <input type="submit" value="create" onclick="createTopic(this.form.name.value, this.form.description.value, this.form.private.value, this.form.userid.value)" style="font-size: 32px">
    </form>
</div>

<script>
    function createTopic(name, description, private, userid) {
        fetch('/topicCreate', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                Title: name,
                Content: description,
                Private: JSON.parse(private),
                UserID: parseInt(userid)
            })
        })
        .then(response => response.text())
        .then(data => {
            console.log(data);
            document.getElementById("create-topic-info").innerHTML = data;
        })
        .catch(error => console.error(error));

    }
</script>
{{end}}